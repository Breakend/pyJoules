# pyJoules

an Energy meter to measure python code 

## Architecture 
![diagram](https://yuml.me/diagram/class/%252F%252F%20pyJoules%20Class%20Diagram,%20[NoSuchEnergyDeviceError]-%5E[PyJoulesError],%20[CantAddEnergyMeterError]-%5E[PyJoulesError],%20[NoSuchDomainError%7C+domain_name:%20str]-%5E[PyJoulesError],%20[GPUDoesNotSupportEnergyMonitoringError]-%5E[PyJoulesError],%20,%20[«value%20object»;EnergySample%7C+timestamp:float;+tag:str;+duration:float;+energy:%20dict(str%20to%20float)],%20[«value%20object»;EnergySamples%7C+next():EnergySample;+has_next():boolean;+get_sample(tag:str):EnergySample],%20[«value%20object»;EnergyDomain%7C+_repr__():str],%20[«entity»;EnergyState%7C-timestamp:long;-tag:str;-values:array(long)%7C+compute_duration():long;+compute_energy():array(float)],%20[«aggregate»;EnergyMeter%7C-domains:array(str)%7C+__init__(domains:array(EnergyDomain));+start():void;+record(tag:str):void;+stop(tag:str):void;+compute():EnergySamples],%20[«service»;EnergyContext%7C+__init__(handler:EnergyHandler%20domains:array(EnergyDomain));+record(tag:str)],%20[«decorator»;measureit%7C+__init__(handler:EnergyHandler%20domains:array(EnergyDomain))],%20[«abstract»;EnergyDevice%7C+configure(domain:EnergyDomain):void;+available_domains():array(EnergyDomain);+get_energy():array(float)],%20[«abstract»;EnergyHandler%7C+process(samples:EnergySamples):void],%20[RaplDevice%7C+ALL:EnergyDomain;+PACKAGE:EnergyDomain;+UNCORE:EnergyDomain;+CORE:EnergyDomain;+DRAM:EnergyDomain%7C+PACKAGE(n:short):EnergyDomain;+UNCORE(n:short):EnergyDomain;+CORE(n:short):EnergyDomain;+DRAM(n:short):EnergyDomain],%20[CudaDevice%7C+GPU:EnergyDomain%7C+GPU(n:short):EnergyDomain],%20[PowerspyDevice%7C+OUTLET:EnergyDomain%7C+__init__(address:str)],%20[MongodbRecorder%7C+__init__(address:str%20port:short%20user:str%20password:str)],%20[FileRecorder%7C+__init__(path:str)],%20[MongodbRecorder%7Bbg:blue%7D]-%5E[«abstract»;EnergyHandler],%20[FileRecorder%7Bbg:blue%7D]-%5E[«abstract»;EnergyHandler],%20,%20[PandasHandler%7Bbg:blue%7D]-%5E[«abstract»;EnergyHandler],%20[RaplDevice%7Bbg:green%7D]-%5E[«abstract»;EnergyDevice],%20,%20[CudaDevice%7Bbg:green%7D]-%5E[«abstract»;EnergyDevice],%20,%20[PowerspyDevice%7Bbg:green%7D]-%5E[«abstract»;EnergyDevice],%20,%20[«aggregate»;EnergyMeter]get_sample-%3E[«value%20object»;EnergySample],%20[«aggregate»;EnergyMeter]get_samples-%3E[«value%20object»;EnergySamples],%20[«aggregate»;EnergyMeter]%3C%3Edelegates-1..*%3E[«value%20object»;EnergyDomain],%20,%20[«aggregate»;EnergyMeter]last++-1%3E[«entity»;EnergyState],%20,%20[«abstract»;EnergyDevice]exposes++--1..*[«value%20object»;EnergyDomain],%20[«entity»;EnergyState]previous++-0..1%3E[«entity»;EnergyState],%20,%20[«abstract»;EnergyHandler]parses-*%3E[«value%20object»;EnergySamples],%20[«value%20object»;EnergySamples]next--%3E1[«value%20object»;EnergySample],%20[«service»;EnergyContext]creates--%3E1[«aggregate»;EnergyMeter],%20[«service»;EnergyContext]delegates--%3E1[«abstract»;EnergyHandler],%20[«decorator»;measureit]creates--%3E1[«aggregate»;EnergyMeter],%20[«decorator»;measureit]delegates--%3E1[«abstract»;EnergyHandler],)
